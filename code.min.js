function createPopup(){minDate=moment(observatoriesCache[0].timeStart).toDate(),maxDate=moment(observatoriesCache[0].timeEnd).toDate(),$("#startDateDatepicker").datepicker({width:"100%",minDate:minDate,maxDate:maxDate}),$("#satSel").select2({placeholder:"Select a satellite",allowClear:!0,minimumInputLength:0,width:"100%"}).on("change",function(e){var t=$("#satSel").val(),a=_.findWhere(observatoriesCache,{id:t}),i=moment(a.timeStart).toDate(),r=moment(a.timeEnd).toDate();$("#startDateDatepicker").datepicker("option","minDate",i),$("#startDateDatepicker").datepicker("option","maxDate",r),$("#startDateDatepicker").val(""),$("#endDateDatepicker").datepicker("option","minDate",i),$("#endDateDatepicker").datepicker("option","maxDate",r),$("#endDateDatepicker").val("")}),$("#startHourTimepicker").timepicker({timeFormat:"HH:mm:ss",dynamic:!1,dropdown:!1,scrollbar:!1}),$("#endDateDatepicker").datepicker({width:"100%",minDate:minDate,maxDate:maxDate}),$("#endHourTimepicker").timepicker({timeFormat:"HH:mm:ss",dynamic:!1,dropdown:!1,scrollbar:!1}),$("#orbitType").select2({placeholder:"Select a State",allowClear:!0,minimumInputLength:0,width:"100%"}),$('[data-toggle="tooltip"]').tooltip()}function cleanAll(){viewer.entities.removeAll()}function satelliteAdd(){var e={satSel:$("#satSel").val(),startDateDatepicker:$("#startDateDatepicker").val(),startHourTimepicker:$("#startHourTimepicker").val(),endDateDatepicker:$("#endDateDatepicker").val(),endHourTimepicker:$("#endHourTimepicker").val(),orbitType:$("#orbitType").val(),inputColor:$("#inputColor").val()};iso8601RegExp=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})([T\\s](\\d{2}))?(:(\\d{2}))?(:(\\d{2}))?(\\.(\\d{3}))?Z?");var t=moment($("#startDateDatepicker").val(),"DD/MM/YYYY").format("YYYY-MM-DD")+" "+$("#startHourTimepicker").val(),a=moment($("#endDateDatepicker").val(),"DD/MM/YYYY").format("YYYY-MM-DD")+" "+$("#endHourTimepicker").val();if(minDate>moment($("#startDateDatepicker").val(),"DD/MM/YYYY")||moment($("#startDateDatepicker").val(),"DD/MM/YYYY")>maxDate)jAlert2("Invalid Start date","error");else if(minDate>moment($("#endDateDatepicker").val(),"DD/MM/YYYY")||moment($("#endDateDatepicker").val(),"DD/MM/YYYY")>maxDate)jAlert2("Invalid End date","error");else if(iso8601RegExp.test(t))if(t=getIso8601FromInput(t),iso8601RegExp.test(a))if(a=getIso8601FromInput(a),getDateFromIso8601(t)>=getDateFromIso8601(a))jAlert2("Start Time must be less than Stop Time","error");else{var i=$("#satSel").val(),r=t.replace(/-\s*/g,"");r=(r=r.replace(/:\s*/g,"")).replace(".000","");var o=a.replace(/-\s*/g,"");o=(o=o.replace(/:\s*/g,"")).replace(".000",""),$.ajax({type:"GET",url:"https://sscweb.sci.gsfc.nasa.gov/WS/sscr/2/locations/"+i+"/"+r+","+o+"/geo/",data:{},dataType:"json",contentType:"application/json",success:_.bind(addSatellitesToMap,this,e),error:getLocationsError})}else jAlert2("Invalid Stop Time","error");else jAlert2("Invalid Start Time","error")}function hexToRgb(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,a,i){return t+t+a+a+i+i});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function addSatellitesToMap(e,t){for(var a=t.Result.Data[1][0].Coordinates[1][0].X[1],i=t.Result.Data[1][0].Coordinates[1][0].Y[1],r=t.Result.Data[1][0].Coordinates[1][0].Z[1],o=[],n=[],s=0;s<a.length;s++){var l=geo2dgz(a[s],i[s],r[s]);o.push(l[0]),o.push(l[1]),o.push(l[2]),n.push(l[0]),n.push(l[1])}var d="";d=2==e.orbitType?Cesium.Cartesian3.fromDegreesArrayHeights(o):Cesium.Cartesian3.fromDegreesArray(n);var p=hexToRgb(e.inputColor),m=(viewer.entities.add({polyline:{positions:d,width:2,material:new Cesium.PolylineOutlineMaterialProperty({color:Cesium.Color.fromBytes(p.r,p.g,p.b,255),outlineWidth:1})}}),$("#satelliteDetailInit").html());m=(m=m.replace("longs",o[0])).replace("lats",o[1]),2==e.orbitType&&(m=m.replace("alts",o[2])),2==e.orbitType?viewer.entities.add({name:e.satSel,description:m,position:Cesium.Cartesian3.fromDegrees(o[0],o[1],o[2]),billboard:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIMCwEtIYadOQAAAclJREFUSMe1ls9qFEEQxn+dbF88xINbrieR4BvEJ8glIYh4EsKuIggheIh4EQKhDk18AQ++gHcPGtSA+ACibyAeEhC1lYCHRamE9VKBYTK7TG+Sgmaamvoz9dVX3QMtRdQa92cqojYnanMlPp3CHFv+fHJeCS6UVj3TFvdpbSZWkFNE1DrAxZzi71rgLnCQUzyaugKXFWBf1HrACBiJ2hVgD1gqhqhGx5BTfAWsAzvAdV+vgbWc4htRC8X0FbVZUVupOonaXVH756tfe3dT1GIJ37uiNhS1QS3Qmqg9qOkGbttthKiprJziL2AeeCRqfW/2AtAFeqK24Lo+sAHMu88JuMPxhPoQVXk+crwXgYdAD7jh7z4BP4DnwAfgCxAqvkNgO6f4Z6YlarMNuiP/iDDJMYgaOcWmPvScOc9yii8comNa7uYUP4vaKvAYuJ1T/NZ6CEXtkjfuXq2h9xuavOq2l0tY1BG1Ww2B/o6h6bJPfPG5HyrBP4raO1F76/tB1WYcJKFFwmXgpTNq09VPga/AnZzizmnPovfANW9iAEJO8TtwFdg91X3gDDsEfo4ZRsaxsFUFkxzb2pTeaMPSG600wTbnJdP+tvwHQH/c3vjnMgoAAAAASUVORK5CYII="}}):viewer.entities.add({name:e.satSel,description:m,position:Cesium.Cartesian3.fromDegrees(o[0],o[1]),billboard:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIMCwEtIYadOQAAAclJREFUSMe1ls9qFEEQxn+dbF88xINbrieR4BvEJ8glIYh4EsKuIggheIh4EQKhDk18AQ++gHcPGtSA+ACibyAeEhC1lYCHRamE9VKBYTK7TG+Sgmaamvoz9dVX3QMtRdQa92cqojYnanMlPp3CHFv+fHJeCS6UVj3TFvdpbSZWkFNE1DrAxZzi71rgLnCQUzyaugKXFWBf1HrACBiJ2hVgD1gqhqhGx5BTfAWsAzvAdV+vgbWc4htRC8X0FbVZUVupOonaXVH756tfe3dT1GIJ37uiNhS1QS3Qmqg9qOkGbttthKiprJziL2AeeCRqfW/2AtAFeqK24Lo+sAHMu88JuMPxhPoQVXk+crwXgYdAD7jh7z4BP4DnwAfgCxAqvkNgO6f4Z6YlarMNuiP/iDDJMYgaOcWmPvScOc9yii8comNa7uYUP4vaKvAYuJ1T/NZ6CEXtkjfuXq2h9xuavOq2l0tY1BG1Ww2B/o6h6bJPfPG5HyrBP4raO1F76/tB1WYcJKFFwmXgpTNq09VPga/AnZzizmnPovfANW9iAEJO8TtwFdg91X3gDDsEfo4ZRsaxsFUFkxzb2pTeaMPSG600wTbnJdP+tvwHQH/c3vjnMgoAAAAASUVORK5CYII="}}),getSateliteDetail(e,o)}function getLocationsError(e,t,a){jAlert2("Server request error:\n  HTTP error: "+a+"\n  "+t+"\n  ","error")}function geo2dgz(e,t,a){var i=[],r=6371.2,o=math.pow(6378.16,2),n=math.pow(6356.775,2),s=180/math.PI,l=math.atan2(t/s,e/s);i.push(math.round(180*l/Math.PI,13));var d=math.sqrt(e*e+t*t),p=math.atan2(a,d);i.push(math.round(180*p/Math.PI,13));var m=math.cos(p),c=0;m<1e-15?(p/=s,c=(a-1)*math.sqrt(n)):c=d/m-1;for(var A=0,u=!0,g=0,f=0;u;)g=c,f=p,m=math.sqrt(o-(o-n)*math.sin(f)*math.sin(f)),p=math.atan2(a*(g+o/m/r),d*(g+n/m/r)),c=d/math.cos(p)-o/m/r,(A+=1)>1e3?(c=0,p=0,u=!1):(math.abs(c-g)<=1e-5||math.abs(p-f)<=1e-5)&&(c*=r,p/=s,u=!1);return i.push(math.round(c,1)),$(location).attr("href").includes("sbesada")?i:[]}function getSatelites(){new Object;$.ajax({type:"GET",url:"https://sscweb.sci.gsfc.nasa.gov/WS/sscr/2/observatories",data:{request:"sbesada"},dataType:"json",contentType:"application/json",success:displayObservatories,error:displayObservatoriesError})}function getSateliteDetail(e,t){var a="https://sscweb.sci.gsfc.nasa.gov/WS/sscr/2";iso8601RegExp=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})([T\\s](\\d{2}))?(:(\\d{2}))?(:(\\d{2}))?(\\.(\\d{3}))?Z?");var i=moment(e.startDateDatepicker,"DD/MM/YYYY").format("YYYY-MM-DD")+" "+e.startHourTimepicker,r=moment(e.endDateDatepicker,"DD/MM/YYYY").format("YYYY-MM-DD")+" "+e.endHourTimepicker;if(iso8601RegExp.test(i))if(i=getIso8601FromInput(i),iso8601RegExp.test(r))if(r=getIso8601FromInput(r),getDateFromIso8601(i)>=getDateFromIso8601(r))jAlert2("Start Time must be less than Stop Time","error");else{var o="<TimeInterval><Start>"+i+"</Start><End>"+r+"</End></TimeInterval>",n="";satId=e.satSel,n+="<Satellites><Id>"+satId+"</Id><ResolutionFactor>2</ResolutionFactor></Satellites>";var s='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><GraphRequest xmlns="http://sscweb.gsfc.nasa.gov/schema">',l='<BFieldModel><InternalBFieldModel>IGRF-10</InternalBFieldModel><ExternalBFieldModel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="Tsyganenko89cBFieldModel"><KeyParameterValues>KP3_3_3</KeyParameterValues></ExternalBFieldModel><TraceStopAltitude>100</TraceStopAltitude></BFieldModel>',d=(new Object,s+o+l+n+getGraphOptions("Orbit")+"</GraphRequest>"),p={control:e,coordinates:t,orbitGif:"",orbitPdf:"",mappedGif:"",mappedPdf:"",seriesGif:"",seriesPdf:""};_.delay(function(){addSatelliteDetail(p,{name:"orbitGif",value:"error"},{name:"orbitPdf",value:"error"})},5e3),_.delay(function(){addSatelliteDetail(p,{name:"seriesGif",value:"error"},{name:"seriesPdf",value:"error"})},5e3),_.delay(function(){addSatelliteDetail(p,{name:"mappedGif",value:"error"},{name:"mappedPdf",value:"error"})},5e3),$.ajax({type:"POST",url:a+"/graphs",data:d,dataType:"xml",contentType:"application/xml",processData:!1,success:_.bind(displayPlotOrbit,this,p),error:plotError});var m=s+o+l+n+getGraphOptions("Mapped")+"</GraphRequest>";$.ajax({type:"POST",url:a+"/graphs",data:m,dataType:"xml",contentType:"application/xml",processData:!1,success:_.bind(displayPlotMapped,this,p),error:plotError});var c=s+o+l+n+getGraphOptions()+"</GraphRequest>";$.ajax({type:"POST",url:a+"/graphs",data:c,dataType:"xml",contentType:"application/xml",processData:!1,success:_.bind(displayPlot,this,p),error:plotError})}else jAlert2("Invalid Stop Time","error");else jAlert2("Invalid Start Time","error")}function addSatelliteDetail(e,t,a){if("orbitGif"==t.name&&(e.orbitGif=t.value),"orbitPdf"==a.name&&(e.orbitPdf=a.value),"mappedGif"==t.name&&(e.mappedGif=t.value),"mappedPdf"==a.name&&(e.mappedPdf=a.value),"seriesGif"==t.name&&(e.seriesGif=t.value),"seriesPdf"==a.name&&(e.seriesPdf=a.value),""!=e.orbitGif&&""!=e.orbitPdf&&""!=e.mappedGif&&""!=e.mappedPdf&&""!=e.seriesGif&&""!=e.seriesPdf){var i=$("#satelliteDetail").html(),r=e.coordinates;i=(i=i.replace("longs",r[r.length-3])).replace("lats",r[r.length-2]),2==e.control.orbitType&&(i=i.replace("alts",r[r.length-1])),i=(i=(i=(i=(i=(i=i.replace("orbitGif",e.orbitGif)).replace("orbitPdf",e.orbitPdf)).replace("mappedGif",e.mappedGif)).replace("mappedPdf",e.mappedPdf)).replace("seriesGif",e.seriesGif)).replace("seriesPdf",e.seriesPdf);2==e.control.orbitType?(viewer.entities.add({name:e.control.satSel,description:i,position:Cesium.Cartesian3.fromDegrees(r[r.length-3],r[r.length-2],r[r.length-1]),billboard:{image:"data:image/png;base64,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"}}),r[r.length-1]>1e8?jAlert2("Very hight altitude","warning"):$("#alert").dialog("close")):(viewer.entities.add({name:e.control.satSel,description:i,position:Cesium.Cartesian3.fromDegrees(r[r.length-3],r[r.length-2]),billboard:{image:"data:image/png;base64,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"}}),$("#alert").dialog("close"))}}function displayPlotOrbit(e,t){for(var a={name:"orbitGif",value:"error"},i={name:"orbitPdf",value:"error"},r=$(t).find("Name").map(function(){return $(this).text()}).get(),o=0;o<r.length;o++)r[o].indexOf(".gif")===r[o].length-4?(e.orbitGif=r[o],a.value=r[o]):r[o].indexOf(".pdf")===r[o].length-4&&(e.orbitPdf=r[o],i.value=r[o]);addSatelliteDetail(e,a,i)}function displayPlotMapped(e,t){for(var a={name:"mappedGif",value:"error"},i={name:"mappedPdf",value:"error"},r=$(t).find("Name").map(function(){return $(this).text()}).get(),o=0;o<r.length;o++)r[o].indexOf(".gif")===r[o].length-4?(e.mappedGif=r[o],a.value=r[o]):r[o].indexOf(".pdf")===r[o].length-4&&(e.mappedPdf=r[o],i.value=r[o]);addSatelliteDetail(e,a,i)}function displayPlot(e,t){for(var a={name:"seriesGif",value:"error"},i={name:"seriesPdf",value:"error"},r=$(t).find("Name").map(function(){return $(this).text()}).get(),o=0;o<r.length;o++)r[o].indexOf(".gif")===r[o].length-4?(e.seriesGif=r[o],a.value=r[o]):r[o].indexOf(".pdf")===r[o].length-4&&(e.seriesPdf=r[o],i.value=r[o]);addSatelliteDetail(e,a,i)}function getIso8601FromInput(e){for(var t=iso8601RegExp.exec(e),a=0;a<t.length;a++)void 0===t[a]&&(t[a]="00");return t[1]+"-"+t[2]+"-"+t[3]+"T"+t[5]+":"+t[7]+":"+t[9]+".000Z"}function plotError(e,t,a){var i=$.parseXML(e.responseText);jAlert2("Server request error:\n  HTTP error: "+a+"\n  "+$(i).find(".ErrorMessage").text()+"\n  "+$(i).find(".ErrorDescription").text(),"error")}function getGraphOptions(e){return"Orbit"==e?'<GraphOptions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="OrbitGraphOptions"><CoordinateSystem>Gse</CoordinateSystem><Combined>true</Combined><XyView>true</XyView><XzView>true</XzView><YzView>true</YzView><XrView>true</XrView><SunToRight>false</SunToRight><EvenAxesScale>false</EvenAxesScale><ShowBowShockMagnetopause>true</ShowBowShockMagnetopause><SolarWindPressure>2.1</SolarWindPressure><ImfBz>0.0</ImfBz></GraphOptions>':"Mapped"==e?'<GraphOptions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="MapProjectionGraphOptions"><Trace>BFieldNorth</Trace><CoordinateSystem>Geo</CoordinateSystem><ShowContinents>true</ShowContinents><Projection>Cylindrical</Projection><GroundStations>FSMI</GroundStations><GroundStations>WHOR</GroundStations><GroundStations>FSIM</GroundStations><GroundStations>GAK</GroundStations><MapLimits><MinLatitude>-90.0</MinLatitude><MaxLatitude>90.0</MaxLatitude><MinLongitude>-180.0</MinLongitude><MaxLongitude>180.0</MaxLongitude></MapLimits><PolarMapOrientation>Equatorial</PolarMapOrientation><LongitudeVerticalDown>0.0</LongitudeVerticalDown><Title>Mapped Plot Test</Title></GraphOptions>':'<GraphOptions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="TimeSeriesGraphOptions"><CoordinateOptions><CoordinateSystem>Gse</CoordinateSystem><Component>X</Component></CoordinateOptions><CoordinateOptions><CoordinateSystem>Gse</CoordinateSystem><Component>Y</Component></CoordinateOptions><CoordinateOptions><CoordinateSystem>Gse</CoordinateSystem><Component>Z</Component></CoordinateOptions><ValueOptions><RadialDistance>true</RadialDistance><BFieldStrength>true</BFieldStrength><DipoleLValue>true</DipoleLValue><DipoleInvLat>true</DipoleInvLat></ValueOptions><DistanceFromOptions><NeutralSheet>true</NeutralSheet><BowShock>true</BowShock><MPause>true</MPause><BGseXYZ>true</BGseXYZ></DistanceFromOptions><BFieldTraceOptions><CoordinateSystem>Geo</CoordinateSystem><Hemisphere>North</Hemisphere><FootpointLatitude>true</FootpointLatitude><FootpointLongitude>true</FootpointLongitude><FieldLineLength>true</FieldLineLength></BFieldTraceOptions></GraphOptions>'}function getDateFromIso8601(e){for(var t=iso8601RegExp.exec(e),a=0;a<t.length;a++)void 0===t[a]&&(t[a]=0);return new Date(Date.UTC(t[1],t[2]-1,t[3],t[5],t[7],t[9],t[11]))}function validTimeRange(e,t,a){var i=getDateFromIso8601(e.StartTime),r=getDateFromIso8601(e.EndTime);return t>=i&&a<=r?"":"Time range outside of data for "+e.Name+".\n\nIt must be within "+e.StartTime+"\nto "+e.EndTime+"."}function displayObservatories(e){observatoriesCache=[];var t,a={id:"",timeStart:"",timeEnd:""},i=new Object;e.Observatory[1].sort(function(e,t){return e.Name<t.Name?-1:e.Name>t.Name?1:0});for(var r=0;r<e.Observatory[1].length;r++){if(observ=e.Observatory[1][r],t!=observ.Name)if(i[observ.Id]=observ,"ace"==observ.Id){$("#satSel").append('<option value="'+observ.Id+'" title="'+observ.StartTime[1]+" to "+observ.EndTime[1]+'" selected="selected">'+observ.Name+"</option>");a={id:observ.Id,timeStart:observ.StartTime[1],timeEnd:observ.EndTime[1]};observatoriesCache.push(a)}else{$("#satSel").append('<option value="'+observ.Id+'" title="'+observ.StartTime[1]+" to "+observ.EndTime[1]+'">'+observ.Name+"</option>");a={id:observ.Id,timeStart:observ.StartTime[1],timeEnd:observ.EndTime[1]};observatoriesCache.push(a)}t=observ.Name}createPopup()}function displayObservatoriesError(e,t,a){jAlert2("Server request error:\n  HTTP error: "+a+"\n  "+t+"\n  ","error")}function jAlert2(e,t){var a="alert-success_dialog";t&&"error"==t?(a="alert-danger_dialog",_.delay(function(){$("#alert").dialog("close")},5e3)):t&&"warning"==t&&(a="alert-warning_dialog",_.delay(function(){$("#alert").dialog("close")},5e3)),$("#alert").dialog("instance")&&($($("#alert").siblings()[1]).removeClass("alert-danger_dialog"),$($("#alert").siblings()[1]).removeClass("alert-success_dialog"),$($("#alert").siblings()[1]).removeClass("alert-warning_dialog"),$($("#alert").siblings()[1]).addClass(a),$("#alert.ui-widget-content").css({color:"#ffffff"}));var i=$("#toolbar");$("#alert").html(e).dialog({resizable:!1,modal:!1,dialogClass:a,show:"blind",hide:"blind",create:function(e,t){$($("#alert").siblings()[0]).hide(),$($("#alert").siblings()[1]).addClass(a),$("#alert.ui-widget-content").css({color:"#ffffff"})},position:{my:"left top",at:"left+10 top+45",of:i},buttons:[{text:"Close",click:function(){$(this).dialog("close")},class:a}]})}function isMobile(){return!!(screen.availWidth<=800||window.innerWidth<=800||navigator.userAgent.toLowerCase().includes("mobile"))}$(document).ready(function(){$("#satelliteDetail").load("https://sbesada.github.io/satellites/templates/satelliteDetail.html"),$("#satelliteDetailInit").load("https://sbesada.github.io/satellites/templates/satelliteDetailInit.html"),getSatelites(),$(location).attr("href").includes("sbesada")&&(Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlOGNiNWRhNC05ZWJhLTRiZWEtODk2ZC0yNDAzMzVkZjNiNTEiLCJpZCI6MjAzMTYsInNjb3BlcyI6WyJhc2wiLCJhc3IiLCJhc3ciLCJnYyJdLCJpYXQiOjE1NzcyMTE3Mzd9.DAwN8uXToLHhXiM0p92MBYF8tuMkfzOBOgScFQYu1NQ"),viewer=new Cesium.Viewer("cesiumContainer",{sceneMode:Cesium.SceneMode.SCENE3D,imageryProvider:new Cesium.TileMapServiceImageryProvider({url:Cesium.buildModuleUrl("Assets/Textures/NaturalEarthII")}),baseLayerPicker:!0,geocoder:!1,mapProjection:new Cesium.WebMercatorProjection}),$("#control").on("click",function(){if(!$("#dialog").dialog("instance")||!$("#dialog").dialog("isOpen")){var e="Control Panel (draggable)";if(isMobile()){e="Control Panel";$("#control").css("color"),window.matchMedia("(orientation: portrait)");if(screen.availWidth>screen.availHeight||window.innerWidth>window.innerHeight)return void jAlert2("No available in landscape mode","error")}$("#dialog").dialog({minWidth:385,maxHeight:405,resizable:!1,title:e,dialogClass:"cesium-infoBox cesium-infoBox-visible"})}}),$("#add").on("click",function(){""!=$("#satSel").val()&&""!=$("#startDateDatepicker").val()&&""!=$("#startHourTimepicker").val()&&""!=$("#endDateDatepicker").val()&&""!=$("#endHourTimepicker").val()&&""!=$("#orbitType").val()&&""!=$("#inputColor").val()?(isMobile()&&$("#dialog").dialog("close"),jAlert2("Loading"),satelliteAdd()):jAlert2("All fileds are mandatory","error")}),$("#clean").on("click",function(){cleanAll()})});